<html>
    <body>
        This is ARMViz!
        <iframe id="armvizFrame" src="https://windowmessages.azurewebsites.net/index.html"></iframe>
        <span id="armvizMessage" />
        
        <script>
                (function() {
                    const webFrame = document.getElementById('armvizFrame');
                    const messageElement = document.getElementById('armvizMessage');

                    // Handle the message from VS Code
                    window.addEventListener('message', event => {
                        messageElement.innerText = JSON.stringify(event.data);
                        console.log('Received new ARM template');

                        var clone = JSON.parse(JSON.stringify(event.data));

                        webFrame.contentWindow.postMessage(event.data, '*');

                            //Pass on the message to our nested iframe
                    });
                })();
            </script>
    </body>
</html>